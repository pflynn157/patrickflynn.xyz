<!DOCTYPE HTML>
<html>
    <head>
		<title>Caffeine and Code</title>
        
        <!-- Import bootstrap -->
        <link href="css/bootstrap.min.css" rel="stylesheet">
        <script src="js/bootstrap.bundle.min.js"></script>
        
        <!-- Custom stylesheets -->
        <link href="css/global.css" rel="stylesheet">
        
        <!-- Properties -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
    </head>
    <body>
        <!-- The navigation bar -->
        <nav class="navbar navbar-expand-sm bg-light navbar-light">
            <div class="container-fluid" id="navbar_logo">
                <a class="navbar-brand" href="/index.html">
		Caffeine and Code
                </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar_main">
                <ul class="navbar-nav me-auto">
                    <!-- Single nav items like this -->
                    <!--<li class="nav-item">
                        <a class="nav-link" href="index.html">Home</a>
                    </li>-->
                    
		<li class="nav-item">		<a class="nav-link" href="index.html">Home</a>		</li>		<li class="nav-item">		<a class="nav-link" href="blog.html">Blog</a>		</li>		<li class="nav-item">		<a class="nav-link" href="contact.html">Contact</a>		</li>		<li class="nav-item">		<a class="nav-link" href="projects.html">Projects</a>		</li>                    
		<li class="nav-item">		<a class="nav-link" href="https://www.linkedin.com/in/patrick-flynn4664/">LinkedIn</a>		</li>		<li class="nav-item">		<a class="nav-link" href="https://github.com/pflynn157/">Github</a>		</li>                    
                    <!--<li class="nav-item">
                        <a class="nav-link" href="https://www.linkedin.com/in/patrick-flynn4664/">LinkedIn</a>
                    </li>
                    
                    <li class="nav-item">
                        <a class="nav-link" href="https://git.sr.ht/~pflynn157/">SourceHut</a>
                    </li>-->
                    
                    <!-- Drop down like this
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">Source Code</a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="https://hg.sr.ht/~pflynn157/">SourceHut (Mercurial)</a></li>
                            <li><a class="dropdown-item" href="https://git.sr.ht/~pflynn157/">SourceHut (Git)</a></li>
                            <li><a class="dropdown-item" href="https://github.com/pflynn157">Github</a></li>
                        </ul>
                    </li>
                    -->
                </ul>
            </div>
        </nav>
        
<div class="container pt-5">
<h1>Espresso</h1>
<p><br />

Espresso is my sixth significant programming language/compiler project. However, it is one of my most unique. All my compilers so far have taken the source language and have gone down to assembly code- they have been compiled languages. Espresso is semi-compiled: It runs on the Java Virtual Machine.
<br /><br />
The purpose of this project was largely to learn more about Java, while providing a unique, interesting challenge. The project is completely written in C++, and because I am great believe in making things as difficult as possible, I wrote the library for generating the Java class files myself. The frontend is a fork of Orka's. However, the language is not Orka. The JVM is designed to represent an object oriented programming environment, not the linear environment you would find on a regular machine. As a result, Espresso has programming constructs to open these features.
<br /><br />
You can find the source here: <a href="https://github.com/pflynn157/espresso">https://github.com/pflynn157/espresso</a>
<br /><br />
<h3>The Language</h3>
<br /><br />
You can find documentation on the current progress of the language <a href="/espresso-language.html">here</a>.
<br /><br />
<h3>How Does One Generate Java?</h3>
<br /><br />
Generating Java is actually not that difficult. It is not for the faint of heart however; you need to make sure you know how to write binary, especially structures, and you need to be ready to read some documentation.
<br /><br />
In my first Java code generator, I was stupidly generating all the binary manually, and needless to say, this was very buggy. In this generator, I use structures to write everything. However, in C and C++ at least, you can't write deep trees to a file. In other words, if your structure has pointers to other sub-structures, you will need to have separate routines to write them in the proper order to a file. C++ allows member functions in structures, so the most efficient method is to override and call these functions.
<br /><br />
These links provide good information on the Java class file and Java bytecode. They were the starting point for this project and previous projects:
<br /><br />
<ul>
<li> <a href="https://medium.com/@davethomas_9528/writing-hello-world-in-java-byte-code-34f75428e0ad">https://medium.com/@davethomas_9528/writing-hello-world-in-java-byte-code-34f75428e0ad</a></li>
<li> <a href="https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html">https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html</a></li>
<li> <a href="https://en.wikipedia.org/wiki/Java_bytecode_instruction_listings">https://en.wikipedia.org/wiki/Java_bytecode_instruction_listings</a></li>
</ul>
<br /><br />
<h3>Building and Running</h3>
<br /><br />
Building is super easy. Simple create a build directory, run CMake (no arguments needed), and run make. The only dependency to build is a C++ compiler, and the only dependency to run is Java. I would recommend the JDK so you have access to JavaP, but this is not essential.
<br /><br />
To run, simply feed an input file to the compiler. The class file will be generated with the class named after the file. There are two handy command line options:
<br /><br />
<ul>
<li> --ast -&gt; Allows you to visualize the abstract syntax tree (AST)</li>
<li> --javap -&gt; Calls JavaP to disassemble the class file.</li>
</ul>
<br /><br />
<br /><br />
<br /><br /><br /></p>
</div>
    </body>
</html>

